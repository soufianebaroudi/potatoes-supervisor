extends layout

block head

   script(src="https://maps.googleapis.com/maps/api/js?v=3.exp")
   script(src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js")
   script(type='text/javascript').

    var map;
    var LayerStyle = { strokeWeight: 0 };

    function initialize() {
      var mapOptions = {
        zoom: 17,
        mapTypeId: google.maps.MapTypeId.TERRAIN,
        center: new google.maps.LatLng(49.03214771988825, 0.28707396981693)
      };
      map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

        google.maps.event.addListener(map, 'idle', function() {

            bounds = map.getBounds();
            var neLongitude = bounds.getNorthEast().lng();
            var neLatitude  = bounds.getNorthEast().lat();
            var swLongitude = bounds.getSouthWest().lng();
            var swLatitude  = bounds.getSouthWest().lng();

            $.ajax

            ({
                cache : false ,
                type: "GET",
                url: '/gdal',
                data : { neLatitude : neLatitude, neLongitude : neLongitude , swLatitude : swLatitude , swLongitude : swLongitude },

                success: function (data) {


                    deletAllFeatures();
                    map.data.addGeoJson(data );
                    map.data.setStyle(LayerStyle);

                },

                error: function () {

                    console.log('process Error');
                }
            });


        });


        }

    google.maps.event.addDomListener(window, 'load', initialize);

    // Delet All Features

    var deletAllFeatures = function() {

        map.data.forEach(function(feature) {

            map.data.remove(feature);
        });

    }

block body
  br
  br
  br
  div#map-canvas(style="height: 600px")